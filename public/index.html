<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=no">
  <meta name="HandheldFriendly" content="true" />
  <link rel="icon" href="<%= BASE_URL %>favicon.ico">
  <style>
    div {
      -webkit-user-select: none;
      /* Safari 3.1+ */
      -moz-user-select: none;
      /* Firefox 2+ */
      -ms-user-select: none;
      /* IE 10+ */
      user-select: none;
      /* Standard syntax */
    }
  </style>
  <title>Aplikasi Super Admin</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:100,300,400,500,700,900">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Material+Icons">
</head>

<body>
  <noscript>
    <strong>We're sorry but this application doesn't work properly without JavaScript enabled. Please enable it to
      continue.</strong>
  </noscript>
  <div id="app"></div>
  <p id="a2hs"></p>
  <!-- built files will be auto injected -->
</body>
<script>
  if ("serviceWorker" in navigator) {
    navigator.serviceWorker
      .register("/service-worker.js")
      .then(registration => {
        console.log("SW registered: ", registration);
      })
      .catch(registrationError => {
        alert("SW registration failed: ", registrationError);
      });
  }
  const a2hs = document.getElementById("a2hs");
  const btnSave = document.getElementById("btnSave");
  let deferredPrompt;
  window.addEventListener('beforeinstallprompt', function (e) {
    console.log('beforeinstallprompt Event fired');
    e.preventDefault();
    // Stash the event so it can be triggered later.
    deferredPrompt = e;
    a2hs.innerHTML = `I'm ready!
    <button id=\"btnSave\" onclick=\"handleBtnSaveClick()\">Launch</button>`
    return false;
  });

  function handleBtnSaveClick() {
    const result = confirm('Do you want to add the app to home screen?');
    if (result) {
      promptAddToHomeScreen();
    }
  }
  const promptAddToHomeScreen = () => {
    if (deferredPrompt !== undefined) {
      // The user has had a positive interaction with our app and Chrome
      // has tried to prompt previously, so let's show the prompt.
      deferredPrompt.prompt();
      // Follow what the user has done with the prompt.
      deferredPrompt.userChoice.then(function (choiceResult) {
        console.log(choiceResult.outcome);
        if (choiceResult.outcome == 'dismissed') {
          console.log('User cancelled home screen install');
        } else {
          console.log('User added to home screen');
        }
        // We no longer need the prompt.  Clear it up.
        deferredPrompt = null;
      });
    }
  }
</script>


</html>